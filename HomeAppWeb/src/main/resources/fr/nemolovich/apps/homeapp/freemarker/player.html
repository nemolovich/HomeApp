<#import "templates/master.html" as layout />

<@layout.master title="Player page">
<div id="dialog1" class="dialog" title="Basic dialog">
	<p>This is an animated dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div>
<#if error?has_content>
	<p class="error">${error}</p>
<#else>
	
	<#if src??>
		<embed type="application/x-vlc-plugin" 
			pluginspage="http://www.videolan.org" 
			version="VideoLAN.VLCPlugin.2"
			name="vlc"
			id="vlc_player"
			width="640"
			height="480"
			loop="0"
			bgcolor="#606060"
			target="${src}">
		</embed>
	</#if>
	<!-- Parameters -->
	<#assign prevFolder = "">
	<#assign currFolder = "">
	<#if RequestParameters ??>
		<#if RequestParameters['folder'] ??>
			<#assign currFolder = RequestParameters['folder']>
			<p>
				${currFolder}
			</p>
			<p>
				<a href="?" title="Go back to the root path">&lt;&lt; &lt;&lt; Root folder</a>
			</p>
			<#if parentFolder ?? && parentFolder?has_content>
				<#assign prevFolder = parentFolder>
			</#if>
			<p>
				<a href="?folder=${prevFolder}" title="Go back inside parent folder">&lt;&lt; Parent folder</a>
			</p>
		</#if>
	</#if>
	<!-- Parameters -->
	<#if files ??>
		<#if 0 < files?size >
			<#list files as file>
			<p>
			<#if file.directory>
				&gt;&gt; Folder: <a href="?folder=${currFolder}/${file.name}" title="Open folder '${file.name}'">${file.name}</a>
			<#else>
				|&gt; File: <a href="?video=${file.name}&folder=${currFolder}" title="Open video '${file.name}'">${file.name}</a>
			</#if>
			</p>
			</#list>
		</#if>
	</#if>
</#if>
	
</@layout.master>
